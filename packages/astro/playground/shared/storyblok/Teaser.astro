---
import { storyblokEditable } from '@storyblok/astro';
import { segmentStoryblokRichText } from '@storyblok/astro';
import StoryblokComponent from '@storyblok/astro/StoryblokComponent.astro';

const { blok } = Astro.props;

const richTextSegments = segmentStoryblokRichText(blok.text);
---

<div {...storyblokEditable(blok)}>
  <h2 class="heading">
    {blok.headline}
  </h2>

  {
    richTextSegments.map((segment, index) => {
      if (segment.type === 'html') {
        return <div set:html={segment.content} />;
      }
      if (segment.type === 'blok') {
        return <StoryblokComponent blok={segment.blok} />;
      }
    })
  }
</div>
<style>
  .heading {
    text-align: center;
    font: 700 2.25rem/2.5rem sans-serif;
    color: var(--color-primary);
    padding: 3rem 0;
  }
</style>
